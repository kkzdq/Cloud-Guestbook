<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> 留言板 </title>
    <style>
        /* 全局样式重置 */
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Segoe UI', Roboto, 'Microsoft YaHei', sans-serif;
        }

        /* 使用 Bing 每日壁纸 */
        body {
            background: url('https://bing.biturl.top/?resolution=1920&format=image&index=0&mkt=zh-CN') no-repeat center center fixed;
            background-size: cover; /* 保证图片铺满屏幕 */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* --- 容器样式：毛玻璃特效 (Glassmorphism) --- */
        .container {
            background: rgba(255, 255, 255, 0.8);   /* 白色半透明 */
            backdrop-filter: blur(15px);            /* 模糊背景 */
            -webkit-backdrop-filter: blur(15px);    /* 兼容 Safari */
            border-radius: 16px;
            padding: 40px;
            width: 400px; /* 稍微宽一点放两个框 */
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        h1 { color: #333; text-align: center; margin-top: 0; margin-bottom: 20px;}

        /* 表单整体布局：保持垂直，让内容框在第一行 */
        .form-column {
            display: flex;
            flex-direction: column;
            gap: 15px; 
            margin-bottom: 25px;
        }

        /* --- 新增：底部第二行（昵称+按钮）的布局 --- */
        .form-row-bottom {
            display: flex;
            gap: 10px; /* 昵称和按钮之间的间距 */
        }

        /* 这是一个小补丁：确保放在 flex 里的输入框能自动填满剩余宽度 */
        .form-row-bottom input {
            flex: 1; /* 占据除按钮外的所有空间 */
            width: 100%; /* 覆盖全局的 width:100% */
        }

        input {
            height: 48px;       /* 强制固定高度，确保上下一样高 */
            padding: 0 12px;    /* 上下padding设为0，靠line-height居中，左右保持12 */
            border: 1px solid #ccc;
            border-radius: 10px;
            outline: none;
            width: 100%; 
            box-sizing: border-box;
            font-size: 14px;
            line-height: 46px;  /* (高度48 - 边框2) 保证文字垂直居中 */
        }

        /* 按钮修改：去掉 width: 20%，改为 auto 或固定像素 */
        button {
            height: 48px;       /* 核心修改：高度与输入框完全一致 */
            padding: 0 12px;    /* 上下padding设为0 */
            background-color: #d93025;
            color: white;
            border: none;       /* 按钮没有边框 */
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: background 0.3s;
            
            width: 25%;
            white-space: nowrap;
            
            /* 确保垂直对齐 */
            display: flex;
            align-items: center;
            justify-content: center;
        }
        button:hover { background-color: #b92b1f; }

        /* 留言列表样式 */
        ul {
            list-style: none;
            padding: 0;
            max-height: 350px;
            overflow-y: auto;
        }

        li {
            background: rgba(255, 255, 255, 0.95);
            margin-bottom: 10px;
            padding: 12px 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between; /* 左右两端对齐：左边字，右边时间 */
            align-items: center;
        }

        /* --- 留言内容布局 --- */
        .msg-left {
            display: flex;
            align-items: center;
            max-width: 75%; /* 防止文字太长挤到时间 */
        }

        /* 昵称样式 */
        .nick {
            font-weight: bold;
            color: #d93025; /* 红色高亮昵称 */
            margin-right: 2px; /* 昵称和冒号稍微有点距离 */
            white-space: nowrap;
            font-size: 14px;
        }

        .msg-text { 
            color: #333; 
            word-break: break-all; /* 内容太长自动换行 */
        }

        .msg-time { 
            font-size: 12px; 
            color: #999; 
            margin-left: 10px; 
            white-space: nowrap;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>☁️ 云端留言墙</h1>
        
        <!-- 垂直布局 -->
        <form method="post" class="form-column">
            
            <!-- 第一行：内容输入框 (单独占一行) -->
            <input type="text" name="content" placeholder="说点什么..." required autocomplete="off">
            
            <!-- 第二行：昵称 + 按钮 -->
            <div class="form-row-bottom">
                <input type="text" name="nickname" placeholder="你的昵称" required autocomplete="off">
                <button type="submit">发 送</button>
            </div>
        </form>

        <ul>
            {% for msg in messages %}
            <li>
                <div class="msg-left">
                    <!-- 昵称内容 在同一行 -->
                    <span class="nick">{{ msg.name }}：</span>
                    <span class="msg-text">{{ msg.text }}</span>
                </div>
                <span class="msg-time">{{ msg.time }}</span>
            </li>
            {% else %}
            <li style="justify-content: center; color: #666;">暂时没有留言，抢个沙发吧！</li>
            {% endfor %}
        </ul>
    </div>

</body>
</html>